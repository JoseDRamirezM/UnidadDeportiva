Consultas requerimientos

#########################################################
3.1 

# Verificar auxiliar
# Se hace de esa manera para poder seleccionar la FECHACARGO
# más reciente

#selecciona todos los auxiliares

SELECT E.CODEMPLEADO CODIGO, E.NOMEMPLEADO ||' '|| E.APELLEMPLEADO NOMBRE, C.DESCARGO CARGO
FROM EMPLEADO E, EMPLEADO_CARGO EC, CARGO C
WHERE E.CODEMPLEADO = EC.CODEMPLEADO
AND EC.IDCARGO = C.IDCARGO
AND LOWER(C.DESCARGO) LIKE 'auxiliar';

# selecciona todos los axiliares y su sede
SELECT E.CODEMPLEADO CODIGO, E.NOMEMPLEADO||' '||E.APELLEMPLEADO NOMBRE, 
C.DESCARGO CARGO, ES.NOMESPACIO SEDE
FROM EMPLEADO E, EMPLEADO_CARGO EC, CARGO C, 
ESPACIO ES, TIPOESPACIO TE
WHERE E.CODEMPLEADO = EC.CODEMPLEADO
AND EC.IDCARGO = C.IDCARGO
AND LOWER(C.DESCARGO) LIKE 'auxiliar'
AND EC.CODESPACIO = ES.CODESPACIO
AND ES.IDTIPOESPACIO = TE.IDTIPOESPACIO
AND EC.FECHAFINCAR IS NULL
AND LOWER(TE.DESCTIPOESPACIO) LIKE 'sede';



SELECT * FROM
(
    SELECT DISTINCT A.CODEMPLEADO CODIGO, A.NOMEMPLEADO||' '||A.APELLEMPLEADO NOMBRE,
        C.DESCARGO CARGO, E.NOMESPACIO SEDE, EA.FECHACARGO
    FROM EMPLEADO A, EMPLEADO_CARGO EA, CARGO C, ESPACIO E, TIPOESPACIO TE
    WHERE A.CODEMPLEADO = EA.CODEMPLEADO AND
        EA.IDCARGO = C.IDCARGO AND EA.CODESPACIO = E.CODESPACIO
        AND E.IDTIPOESPACIO = TE.IDTIPOESPACIO
        AND LOWER(TE.DESCTIPOESPACIO) LIKE 'sede%'
        AND (LOWER(C.DESCARGO) LIKE 'auxiliar%'
        OR LOWER(C.DESCARGO) LIKE 'director%')
        AND EA.FECHAFINCAR IS NULL
        AND A.CODEMPLEADO = :id
    ORDER BY EA.FECHACARGO
) WHERE ROWNUM = 1
###############################################################

###############################################################

3.2.1.1 COMPLETADO

3.2.1.2

# Consulta nombre y apellido de docente




SELECT * FROM
    (
        SELECT A.CODEMPLEADO CODIGO, A.NOMEMPLEADO NOMBRE,
        C.DESCARGO CARGO, E.NOMESPACIO SEDE
        FROM EMPLEADO A, EMPLEADO_CARGO EA, CARGO C, ESPACIO E, TIPOESPACIO TE
        WHERE A.CODEMPLEADO = EA.CODCOMPLEADO AND
        EA.IDCARGO = C.IDCARGO AND EA.CODESPACIO = E.CODESPACIO
        AND E.IDTIPOESPACIO = TE.IDTIPOESPACIO
    !   AND LOWER(TIPOESPACIO) LIKE :sede
        AND LOWER(C.DESCARGO) LIKE
        'docente%' AND EA.FECHAFINCAR IS NULL

    !   AND LOWER(A.NOMEMPLEADO) LIKE :nomEmpleado
        ORDER BY EA.FECHACARGO DESC
    )
WHERE ROWNUM = 1;

seleccionar curso, espacio, deporte, num estudiantes

SELECT P.CONSECPROGRA COD, E.NOMESPACIO ESPACIO, 
D.NOMDEPORTE DEPORTE, P.NOINSCRITO INSCRITOS,
DOC.NOMEMPLEADO||' '||DOC.APELLEMPLEADO DOCENTE,
P.IDHORA HORAINICIO, P.HOR_IDHORA HORAFIN, D.NOMDIA
FROM ESPACIO E, TIPOESPACIO TE,
DEPORTE D, PROGRAMACION P,
EMPLEADO_CARGO EC, EMPLEADO DOC, DIA D, CARGO C
WHERE P.IDDEPORTE = D.IDDEPORTE
AND P.CODESPACIO = E.CODESPACIO
AND E.CODESPACIO = EC.CODESPACIO
AND EC.CODEMPLEADO = DOC.CODEMPLEADO
AND P.IDDIA = D.IDDIA
AND EC.IDCARGO = C.IDCARGO
AND LOWER(C.DESCARGO) LIKE 'docente%'
AND E.IDTIPOESPACIO = TE.IDTIPOESPACIO
AND (LOWER(DOC.NOMEMPLEADO||' '||DOC.APELLEMPLEADO))
LIKE 'egan%bernal'
AND LOWER(D.NOMDIA) LIKE 'lunes';

LIKE 'maria%urrutia');
LIKE 'anthony%zambrano');
LIKE 'yuri%avelar');

3.2.1.2 ELEMENTOS PARA PRESTAR

SELECT ED.CONSECELEMENTO, TE.DESCTIPOELEMENTO, 
E.DESCESTADO, D.NOMDEPORTE, ES.NOMESPACIO
FROM ELEMENDEPORTIVO ED, ESTADO E, TIPOELEMENTO TE, 
DEPORTE D, TIEL_DEP TID, ESP_DEP ESD, ESPACIO ES
WHERE ED.IDESTADO = E.IDESTADO 
AND ED.IDTIPOELEMENTO = TE.IDTIPOELEMENTO
AND TE.IDTIPOELEMENTO = TID.IDTIPOELEMENTO
AND TID.IDDEPORTE = D.IDDEPORTE
AND D.IDDEPORTE = ESD.IDDEPORTE
AND ESD.CODESPACIO = ES.CODESPACIO
AND LOWER(E.DESCESTADO) LIKE 'activo'
AND LOWER(D.NOMDEPORTE) LIKE 'aerobicos'
AND LOWER(ES.NOMESPACIO) LIKE 'sede macarena'
ORDER BY E.DESCESTADO;

SELECT TE.DESCTIPOELEMENTO, E.DESCESTADO ESTADO
FROM ELEMENDEPORTIVO ED, ESTADO E, TIPOELEMENTO TE
WHERE ED.IDESTADO = E.IDESTADO 
AND ED.IDTIPOELEMENTO = TE.IDTIPOELEMENTO
ORDER BY ESTADO;

3.2.2.3 Completado

###############################################################

###########################################################
3.3
# Verificar director deportivo
# Se hace de esa manera para poder seleccionar la FECHACARGO
# más reciente
SELECT * FROM
    (
        SELECT A.CODEMPLEADO CODIGO, A.NOMEMPLEADO NOMBRE,
        C.DESCARGO CARGO, E.NOMESPACIO SEDE
        FROM EMPLEADO A, EMPLEADO_CARGO EA, CARGO C, ESPACIO E, TIPOESPACIO TE
        WHERE A.CODEMPLEADO = EA.CODCOMPLEADO AND
        EA.IDCARGO = C.IDCARGO AND EA.CODESPACIO = E.CODESPACIO
        AND E.IDTIPOESPACIO = TE.IDTIPOESPACIO
        AND LOWER(TIPOESPACIO) LIKE 'sede%'
        AND LOWER(C.DESCARGO) LIKE
        'director deportivo%' AND EA.FECHAFINCAR IS NULL

    !   AND A.CODEMPLEADO = :id
        ORDER BY EA.FECHACARGO DESC
    )
WHERE ROWNUM = 1;
#########################################################

3.2.2
3.2.2.1

RETORNA LAS PRACTICAS LIBRES

SELECT P.CONSECPROGRA COD, E.NOMESPACIO ESPACIO, 
    D.NOMDEPORTE DEPORTE, P.NOINSCRITO INSCRITOS,
    DOC.CODEMPLEADO,
    DOC.NOMEMPLEADO||' '||DOC.APELLEMPLEADO DOCENTE,
    DOC.CODEMPLEADO CODEMPLEADO,
    P.IDHORA HORAINICIO, P.HOR_IDHORA HORAFIN, D.NOMDIA
FROM ESPACIO E, TIPOESPACIO TE,
    DEPORTE D, PROGRAMACION P,
    ACTIVIDAD A,
    EMPLEADO_CARGO EC, EMPLEADO DOC, DIA D, CARGO C
WHERE P.IDDEPORTE = D.IDDEPORTE
    AND P.CODESPACIO = E.CODESPACIO
    AND E.CODESPACIO = EC.CODESPACIO
    AND EC.CODEMPLEADO = DOC.CODEMPLEADO
    AND P.IDACTIVIDAD = A.IDACTIVIDAD
    AND P.IDDIA = D.IDDIA
    AND EC.IDCARGO = C.IDCARGO
    AND E.IDTIPOESPACIO = TE.IDTIPOESPACIO
    AND LOWER(P.IDACTIVIDAD) LIKE 'pr'
    AND LOWER(C.DESCARGO) LIKE 'docente%'


# ASISTENCIA MIEBRO EQUIPO

SELECT P.CONSECPROGRA COD, E.NOMESPACIO ESPACIO, 
    D.NOMDEPORTE DEPORTE, P.NOINSCRITO INSCRITOS,
    DOC.NOMEMPLEADO||' '||DOC.APELLEMPLEADO DOCENTE,
    DOC.CODEMPLEADO CODEMPLEADO,
    P.IDHORA HORAINICIO, P.HOR_IDHORA HORAFIN, D.NOMDIA
FROM ESPACIO E, TIPOESPACIO TE,
    DEPORTE D, PROGRAMACION P,
    ACTIVIDAD A,
    EMPLEADO_CARGO EC, EMPLEADO DOC, DIA D, CARGO C
WHERE P.IDDEPORTE = D.IDDEPORTE
    AND P.CODESPACIO = E.CODESPACIO
    AND E.CODESPACIO = EC.CODESPACIO
    AND EC.CODEMPLEADO = DOC.CODEMPLEADO
    AND P.IDACTIVIDAD = A.IDACTIVIDAD

3.2.3.1
RETORNA LOS EQUIPOS DEL ESTUDIANTE D

SELECT E.CODESTU CODIGO,  P.CONSECPROGRA CONSECPROGRA , P.IDHORA HORAINICIO,
    P.HOR_IDHORA HORAFIN, D.NOMDIA DIA, ES.NOMESPACIO SEDE,
    EQ.CONSEEQUIPO CODEQUIPO, ME.ITEMMIEMBRO, DE.NOMDEPORTE
FROM ESTUDIANTE E, PROGRAMACION P, HORA H, MIEMBROEQUIPO ME,
    DIA D, PERIODO PE, EQUIPO EQ, DEPORTE DE, ESPACIO ES
WHERE E.CODESTU = ME.CODESTU 
    AND P.CODESPACIO = ES.CODESPACIO
    AND ME.CONSEEQUIPO = EQ.CONSEEQUIPO
    AND EQ.IDDEPORTE = DE.IDDEPORTE
    AND P.IDDEPORTE = DE.IDDEPORTE
    AND P.IDPERIODO = PE.IDPERIODO
    AND P.IDHORA = H.IDHORA
    AND P.IDDIA = D.IDDIA
    AND E.CODESTU LIKE ('20221001')
    AND LOWER(ES.NOMESPACIO) LIKE ('sede%macarena')
    AND EQ.CONSEEQUIPO = 1
    AND LOWER(D.NOMDIA) LIKE 'lunes';

3.2.3.2
INSERTA LA ASISTENCIA DEL MIEMBRO DEL EQUIPO

INSERT INTO ASISMIEMBROEQUIPO
(CONSECPROGRA, CONMIEMEQUIPO, CONSEEQUIPO, ITEMMIEMBRO)
VALUES
()

3.3
3.3.3
SELECT E.CODESTU COD, D.NOMDEPORTE, ES.NOMESPACIO, SUM (
CASE 
    WHEN LENGTH(P.IDHORA) = 4 AND LENGTH(P.HOR_IDHORA) = 4
        THEN  TO_NUMBER(SUBSTR(P.HOR_IDHORA,0,1)) - TO_NUMBER(SUBSTR(P.IDHORA,0,1))
    ELSE TO_NUMBER(SUBSTR(P.HOR_IDHORA,0,2)) - TO_NUMBER(SUBSTR(P.IDHORA,0,2))
    END ) AS SUMAHORAS
FROM PROGRAMACION P, ASISMIEMBROEQUIPO AM,
    MIEMBROEQUIPO ME, ESTUDIANTE E,
    EQUIPO EQ, DEPORTE D, ESP_DEP ED,
    ESPACIO ES, TIPOESPACIO TE
WHERE P.CONSECPROGRA = AM.CONSECPROGRA
    AND AM.ITEMMIEMBRO = ME.ITEMMIEMBRO
    AND ME.CODESTU = E.CODESTU
    AND EQ.CONSEEQUIPO = ME.CONSEEQUIPO
    AND D.IDDEPORTE = EQ.IDDEPORTE
    AND D.IDDEPORTE = ED.IDDEPORTE
    AND ES.CODESPACIO = E.CODESPACIO
    AND ES.IDTIPOESPACIO = TE.IDTIPOESPACIO
    AND LOWER(ES.NOMESPACIO) LIKE 'sede macarena'
GROUP BY E.CODESTU, D.NOMDEPORTE, ES.NOMESPACIO;
requerimientos completados

3.1
3.2
3.2.1
3.2.1.1
3.2.1.2
3.2.1.3
3.2.1.4
3.2.1.5

3.2.3
3.2.3.1
3.2.3.2

3.3
3.3.1

directores CODEMPLEADO 1 y 2